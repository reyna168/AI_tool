<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°¾ç‰™æ’²å…‹ç‰ŒæŠ½çç³»çµ±</title>
    <style>
        body {
            font-family: "Microsoft JhengHei", Arial, sans-serif;
            background-color: #2c3e50;
            color: #ecf0f1;
            text-align: center;
            padding: 20px;
        }
        h1 { color: #f1c40f; margin-bottom: 10px; }
        .status { margin-bottom: 30px; font-size: 1.2em; color: #bdc3c7; }
        
        .controls {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        button {
            padding: 15px 30px;
            font-size: 1.2em;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: background 0.3s;
            font-weight: bold;
        }

        /* Button Colors */
        .btn-prize3 { background-color: #e67e22; color: white; }
        .btn-prize3:hover { background-color: #d35400; }
        
        .btn-prize2 { background-color: #95a5a6; color: white; }
        .btn-prize2:hover { background-color: #7f8c8d; }

        .btn-prize1 { background-color: #e74c3c; color: white; transform: scale(1.1); }
        .btn-prize1:hover { background-color: #c0392b; }
        
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* Result Area */
        #result-area {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .winner-card {
            background: white;
            color: #333;
            border-radius: 8px;
            padding: 15px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            animation: popIn 0.5s ease;
        }

        .winner-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #c0392b;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }

        .card-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        .card {
            background: #ecf0f1;
            border: 1px solid #bdc3c7;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .card.red { color: #e74c3c; }
        .card.black { color: #2c3e50; }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>

    <h1>ğŸ‰ å°¾ç‰™æ’²å…‹ç‰ŒæŠ½çç³»çµ± ğŸ‰</h1>
    <div class="status">
        ç›®å‰ç‰Œåº«å‰©é¤˜ï¼š<span id="remaining-count">104</span> å¼µ
    </div>

    <div class="controls">
        <button onclick="drawPrize(3, 10)" class="btn-prize3" id="btn-3">ğŸ æŠ½ä¸‰ç (10å)</button>
        <button onclick="drawPrize(2, 3)" class="btn-prize2" id="btn-2">ğŸ¥ˆ æŠ½äºŒç (3å)</button>
        <button onclick="drawPrize(1, 1)" class="btn-prize1" id="btn-1">ğŸ† æŠ½é ­ç (1å)</button>
    </div>

    <div class="controls">
        <button onclick="resetGame()" style="background-color: #34495e; font-size: 0.9em;">ğŸ”„ é‡ç½®æ‰€æœ‰æŠ½ç</button>
    </div>

    <div id="result-area"></div>

    <script>
        // 1. åˆå§‹åŒ–è®Šæ•¸
        const suits = [
            { symbol: 'â™ ', color: 'black', name: 'é»‘æ¡ƒ' },
            { symbol: 'â™¥', color: 'red', name: 'ç´…å¿ƒ' },
            { symbol: 'â™¦', color: 'red', name: 'æ–¹å¡Š' },
            { symbol: 'â™£', color: 'black', name: 'æ¢…èŠ±' }
        ];
        const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        
        let deck = [];
        
        // 2. å»ºç«‹å…©å‰¯ç‰Œçš„å‡½æ•¸
        function initDeck() {
            deck = [];
            // å…©å‰¯ç‰Œ: i=1 ä»£è¡¨ç¬¬ä¸€å‰¯, i=2 ä»£è¡¨ç¬¬äºŒå‰¯
            for (let i = 1; i <= 2; i++) {
                suits.forEach(suit => {
                    ranks.forEach(rank => {
                        deck.push({
                            deckId: i, // ç¬¬å¹¾å‰¯ç‰Œ
                            suit: suit.symbol,
                            color: suit.color,
                            rank: rank,
                            display: `[ç¬¬${i}å‰¯] ${suit.symbol}${rank}`
                        });
                    });
                });
            }
            updateCount();
            document.getElementById('result-area').innerHTML = '';
            enableButtons();
        }

        // 3. æ›´æ–°å‰©é¤˜å¼µæ•¸é¡¯ç¤º
        function updateCount() {
            document.getElementById('remaining-count').innerText = deck.length;
        }

        // 4. æŠ½çæ ¸å¿ƒé‚è¼¯
        function drawPrize(prizeLevel, count) {
            // æª¢æŸ¥ç‰Œå¤ ä¸å¤ æŠ½
            if (deck.length < count) {
                alert("ç‰Œåº«å¼µæ•¸ä¸è¶³ï¼Œç„¡æ³•ç¹¼çºŒæŠ½å–ï¼");
                return;
            }

            let winners = [];
            
            // éš¨æ©ŸæŠ½å– N å¼µ
            for (let i = 0; i < count; i++) {
                // ç”¢ç”Ÿéš¨æ©Ÿç´¢å¼• (0 åˆ° deck.length - 1)
                const randomIndex = Math.floor(Math.random() * deck.length);
                
                // å–å‡ºè©²å¼µç‰Œä¸¦æ”¾å…¥å¾—çåå–®
                winners.push(deck[randomIndex]);
                
                // **é—œéµï¼šå¾é™£åˆ—ä¸­ç§»é™¤é€™å¼µç‰Œ (splice)ï¼Œç¢ºä¿ä¸é‡è¤‡**
                deck.splice(randomIndex, 1);
            }

            updateCount();
            displayWinners(prizeLevel, winners);
            
            // ç¦ç”¨è©²æŒ‰éˆ•é¿å…é‡è¤‡æŒ‰
            document.getElementById(`btn-${prizeLevel}`).disabled = true;
        }

        // 5. é¡¯ç¤ºä¸­ççµæœ
        function displayWinners(level, winners) {
            const resultArea = document.getElementById('result-area');
            const titles = { 1: "ğŸ† é ­ç (Head Prize)", 2: "ğŸ¥ˆ äºŒç (2nd Prize)", 3: "ğŸ ä¸‰ç (3rd Prize)" };
            
            let html = `
                <div class="winner-card">
                    <div class="winner-title">${titles[level]}</div>
                    <div class="card-list">
            `;

            winners.forEach(card => {
                html += `<div class="card ${card.color}">${card.display}</div>`;
            });

            html += `</div></div>`;
            
            // å°‡æ–°çµæœæ’å…¥åˆ°æœ€ä¸Šæ–¹
            resultArea.insertAdjacentHTML('afterbegin', html);
        }

        // 6. é‡ç½®éŠæˆ²
        function resetGame() {
            if(confirm("ç¢ºå®šè¦é‡ç½®æ‰€æœ‰æŠ½çç´€éŒ„å—ï¼Ÿ")) {
                initDeck();
            }
        }

        function enableButtons() {
            document.getElementById('btn-1').disabled = false;
            document.getElementById('btn-2').disabled = false;
            document.getElementById('btn-3').disabled = false;
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        initDeck();

    </script>
</body>
</html>